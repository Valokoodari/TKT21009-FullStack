(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(37);},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(13),o=n.n(r),u=n(2),i=n(3),s=n.n(i),l="/api/persons",m={getAll:function(){return s.a.get(l);},create:function(e){return s.a.post(l,e);},update:function(e,t){return s.a.put("".concat(l,"/").concat(e),t);},erase:function(e){return s.a.delete("".concat(l,"/").concat(e));}},f=function(e){var t=e.name,n=e.number,a=e.contacts,r=e.setName,o=e.setNumber,u=e.setContacts,i=e.setNotification,s=e.contactService;return c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var c={name:t,number:n};if(a.some((function(e){return t===e.name;}))){var l=a.find((function(e){return e.name===t;}));window.confirm("Update the number of ".concat(t))&&s.update(l.id,c).then((function(e){u(a.map((function(t){return t.id!==l.id?t:e.data;}))),i({message:"Updated ".concat(c.name),type:"Success"}),setTimeout((function(){return i({message:null,type:null});}),5e3);})).catch((function(e){i({message:"Cannot update ".concat(c.name),type:"Error"}),setTimeout((function(){return i({message:null,type:null});}),5e3);}));}else s.create(c).then((function(e){u(a.concat(e.data)),i({message:"Added ".concat(c.name),type:"Success"}),setTimeout((function(){return i({message:null,type:null});}),5e3);})).catch((function(e){console.log(e.response.data.error),i({message:"".concat(e.response.data.error),type:"Error"}),setTimeout((function(){return i({message:null,type:null});}),5e3);}));r(""),o("");}},c.a.createElement("div",{style:{marginTop:-15}},"Name",c.a.createElement("input",{style:{marginLeft:19},value:t,onChange:function(e){r(e.target.value);}})),c.a.createElement("div",{style:{marginTop:5}},"Number",c.a.createElement("input",{style:{marginLeft:5},value:n,onChange:function(e){o(e.target.value);}})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit",style:{marginTop:5}},"Add")));},p=function(e){var t=e.contact,n=e.contactService,a=e.contacts,r=e.setContacts,o=e.setNotification;return c.a.createElement("div",null,"\u2022 ",t.name," - ",t.number,c.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(t.name,"?"))&&n.erase(t.id).then((function(){r(a.filter((function(e){return e.id!==t.id;}))),o({message:"Deleted ".concat(t.name),type:"Success"}),setTimeout((function(){return o({message:null,type:null});}),5e3);})).catch((function(e){o({message:"Cannot delete ".concat(t.name),type:"Error"}),setTimeout((function(){return o({message:null,type:null});}),5e3);}));},style:{marginLeft:4,height:15,width:34,fontSize:10}},c.a.createElement("p",{style:{marginLeft:-4,marginTop:-1}},"delete")));},d=function(e){var t=e.contacts,n=e.search,a=e.contactService,r=e.setContacts,o=e.setNotification,u=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase());}));return c.a.createElement("div",null,u.map((function(e){return c.a.createElement(p,{key:e.id,contact:e,contactService:a,contacts:t,setContacts:r,setNotification:o});})));},g=function(e){var t=e.text,n=e.setText;return c.a.createElement("div",{style:{marginTop:-15}},"Search",c.a.createElement("input",{style:{marginLeft:11},value:t,onChange:function(e){n(e.target.value);}}));},v=function(e){var t=e.notification;return null===t.message?null:"Error"===t.type?c.a.createElement("div",{className:"error"},t.message):c.a.createElement("div",{className:"success"},t.message);},E=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),i=Object(u.a)(o,2),s=i[0],l=i[1],p=Object(a.useState)(""),E=Object(u.a)(p,2),y=E[0],b=E[1],h=Object(a.useState)(""),S=Object(u.a)(h,2),C=S[0],N=S[1],T=Object(a.useState)({message:null,type:null}),j=Object(u.a)(T,2),O=j[0],w=j[1];return Object(a.useEffect)((function(){m.getAll().then((function(e){return r(e.data);}));}),[]),c.a.createElement("div",null,c.a.createElement("h1",{style:{marginTop:-5}},"Phonebook"),c.a.createElement(v,{notification:O}),c.a.createElement(g,{text:C,setText:N}),c.a.createElement("h2",null,"Add a new contact"),c.a.createElement(f,{name:s,number:y,contacts:n,setName:l,setNumber:b,setContacts:r,setNotification:w,contactService:m}),c.a.createElement("h2",null,"Contacts"),c.a.createElement(d,{contacts:n,search:C,contactService:m,setContacts:r,setNotification:w}));};n(36);o.a.render(c.a.createElement(E,null),document.getElementById("root"));}},[[14,1,2]]]);
//# sourceMappingURL=main.87723a95.chunk.js.map